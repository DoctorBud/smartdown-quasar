"use strict";(globalThis["webpackChunksmartdown_quasar"]=globalThis["webpackChunksmartdown_quasar"]||[]).push([[350],{18914:(t,e,a)=>{a.d(e,{Z:()=>l});var o=a(59835);const n={class:"q-mr-auto q-ml-auto"};function i(t,e){return(0,o.wg)(),(0,o.iD)("div",n,[(0,o.WI)(t.$slots,"default")])}var s=a(11639);const u={},d=(0,s.Z)(u,[["render",i]]),l=d},76350:(t,e,a)=>{a.r(e),a.d(e,{default:()=>j});var o=a(59835);const n={key:0},i={key:0},s={key:1};function u(t,e,a,u,d,l){const r=(0,o.up)("Editor"),c=(0,o.up)("SourceEditor"),m=(0,o.up)("smartdown"),p=(0,o.up)("Container"),v=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(v,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[u.note?((0,o.wg)(),(0,o.iD)("div",n,[u.editMode.editing?((0,o.wg)(),(0,o.iD)("div",i,[u.editMode.source?((0,o.wg)(),(0,o.j4)(c,{key:1,class:"full-width edit-border",modelValue:u.note.content,"onUpdate:modelValue":e[1]||(e[1]=t=>u.note.content=t),focused:u.focus},null,8,["modelValue","focused"])):((0,o.wg)(),(0,o.j4)(r,{key:0,class:"full-width edit-border",modelValue:u.note.content,"onUpdate:modelValue":e[0]||(e[0]=t=>u.note.content=t),focused:u.focus},null,8,["modelValue","focused"]))])):((0,o.wg)(),(0,o.iD)("div",s,[(0,o.Wm)(m,{class:"q-mt-md q-pa-sm readonly-border",initInput:u.note.content},null,8,["initInput"])]))])):(0,o.kq)("",!0)])),_:1})])),_:1})}var d=a(60499),l=a(20367);const r={ref:"editor",class:"editor"};function c(t,e,a,n,i,s){return(0,o.wg)(),(0,o.iD)("div",r,null,512)}a(69665);var m=a(50246),p=a(62738),v=a(12343),h=a(33673),w=a(25315),g=a(50178);a(25465);const f=t=>{const e=(0,g.Nr)({schema:w.fK}),a=(0,p.LX)(m.Z);return e.push(a),v.yy.create({doc:w.EU.parse(t),plugins:e})},y={name:"Editor",props:["modelValue","focused"],data(){return{lastValue:null}},created(){this.state=f(this.modelValue)},mounted(){this.view=new h.tk(this.$refs.editor,{state:this.state,dispatchTransaction:t=>{this.state=this.state.apply(t),this.view&&this.view.updateState(this.state),this.lastValue=w.Dm.serialize(this.state.doc),this.$emit("update:modelValue",this.lastValue)}}),this.view.focus()},watch:{focused(t){t&&this.view.focus()},modelValue(t){t!==this.lastValue&&(this.state=f(t),this.view.updateState(this.state))}}};var S=a(11639);const V=(0,S.Z)(y,[["render",c]]),b=V;var E=a(18914);const T=(0,o._)("div",{id:"smartdown-outer-container",class:"smartdown-outer-container smartdown-theme-chat"},[(0,o._)("div",{class:"smartdown-container",id:"smartdown-output"})],-1),k=[T];function M(t,e,a,n,i,s){return(0,o.wg)(),(0,o.iD)("div",null,k)}const D={props:{title:String,initInput:String},setup(t){const e=(0,d.iH)(""),a=(0,d.iH)(t.initInput),n=(0,d.iH)(["This","is"]),i=(0,o.Fl)((()=>n.value.length)),s=(0,d.iH)("");async function u(t){const e=new Promise((e=>{const a=document.createElement("div");smartdown.setSmartdown(t,a,(()=>{const t=a.innerHTML;e(t)}))}));return e}return(0,o.YP)((()=>n.value),(t=>{s.value="",t.forEach((t=>{s.value=`${t} `}))}),{lazy:!1}),(0,o.YP)(SQ.cardToLoad,(async()=>{if(console.log("watch(SQ.cardToLoad",SQ.cardToLoad),SQ.cardToLoad.value){const t=`gallery/${SQ.cardToLoad.value}.md`;console.log("cardPath",t),a.value=await(await fetch(t)).text(),e.value=await u(a.value),await(0,o.Y3)();const n=document.getElementById("smartdown-output");smartdown.setHome(a.value,n,(async()=>{smartdown.startAutoplay(n)}))}})),(0,o.bv)((async()=>{e.value=await u(a.value),await(0,o.Y3)();const t=document.getElementById("smartdown-output");smartdown.setHome(a.value,t,(async()=>{smartdown.startAutoplay(t)}))})),{markdown:a,items:n,itemsQuantity:i,append:s,html:e}}},Q=(0,S.Z)(D,[["render",M]]),Z=Q;function q(t,e,a,n,i,s){const u=(0,o.up)("MonacoEditor");return(0,o.wg)(),(0,o.j4)(u,{theme:"hc-black",options:i.options,language:"markdown",width:800,height:800,diffEditor:!1,original:i.original,value:i.value,"onUpdate:value":e[0]||(e[0]=t=>i.value=t),onEditorDidMount:s.editorDidMount},null,8,["options","original","value","onEditorDidMount"])}var H=a(96842);const L={name:"SourceEditor",props:["modelValue","focused"],data(){return{value:"",original:"",options:{minimap:{enabled:!1},wordWrap:!0,colorDecorators:!0,tabSize:2,automaticLayout:!0,useTabStops:!0,renderWhitespace:!1,stickyTabStops:!1,insertSpaces:!0,formattingOptions:{tabSize:4,insertSpaces:!0}}}},components:{MonacoEditor:H.Z},created(){this.value=this.modelValue,this.original=this.modelValue},watch:{currentValue(t){console.log("currentValue",t,this.value),t!==this.value&&(this.value=t,this.$emit("update:modelValue",this.value))}},methods:{editorDidMount(t){const e=t.getModel(),a=this.options.formattingOptions;e.updateOptions(a),window.editor=t,t.onDidChangeModelContent((()=>{this.$emit("update:modelValue",this.value)}))}}},I=(0,S.Z)(L,[["render",q]]),$=I,C={components:{Container:E.Z,Editor:b,Smartdown:Z,SourceEditor:$},setup(){const t=(0,d.iH)(!0),e=(0,l.o)(),a=(0,o.Fl)({get:()=>e.getNote.value}),n=(0,o.Fl)({get:()=>e.getEditMode.value,set:e.updateEditMode});(0,o.wF)((()=>{t.value=n.value.editing&&!n.value.detailed}));let i=n.value.source;return(0,o.YP)(n,(()=>{n.value.source&&!i&&(n.value.editing=!0),i=n.value.source,n.value.editing&&(SQ.setToolbarVisibility(!0),SQ.setToolbarTransparency(!1),SQ.setToolbarFade(!1)),t.value=n.value.editing&&!n.value.detailed}),{deep:!0}),{note:a,editMode:n,focus:t}}};var F=a(69885),P=a(18149),_=a(69984),W=a.n(_);const Y=(0,S.Z)(C,[["render",u]]),j=Y;W()(C,"components",{QPage:F.Z,QField:P.Z})}}]);